<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="approval">
	<select id="checkCodeDuplidate" resultType="_int">
		select count(*) from ${table} where com_no = #{com_no} and code = #{code}
	</select>
	<insert id="connectionInsert" parameterType="connection">
		insert into connection values(#{code}, #{com_no}, #{connection_name})
	</insert>
	<insert id="gajongInsert" parameterType="gajong">
		insert into tbl_title_of_account values(#{code}, #{com_no}, #{title_of_account})
	</insert>
	<insert id="deptInsert" parameterType="dept">
		insert into tbl_dept values(#{com_no}, #{dept}, 1, #{code})
	</insert>
	<select id="selectListConnect" resultType="connection">
		select * from connection where com_no = #{com_no}
	</select>
	<select id="selectListToa" resultType="gajong">
		select * from tbl_title_of_account where com_no = #{com_no}
	</select>
	<select id="selectListDept" resultType="dept">
		select * from tbl_dept where com_no = #{com_no}
	</select>
	<update id="connectionUpdate">
		update connection set code = ${connect.code}, connection_name = #{connect.connection_name} where code = #{preCode} and com_no = #{connect.com_no}
	</update>
	<update id="gajongUpdate">
		update tbl_title_of_account set code = #{toa.code}, title_of_account = #{toa.title_of_account} where code = #{preCode} and com_no = #{toa.com_no}
	</update>
	<update id="deptUpdate">
		update tbl_dept set code = #{dept.code}, dept = #{dept.dept} where code = #{preCode} and com_no = #{dept.com_no}
	</update>
</mapper>
